---
import oneStar from '../images/oneStar.svg'
import twoStars from '../images/twoStars.svg'
import threeStars from '../images/threeStars.svg'
import Valuation from '../components/Valuation.astro'
import { Swiper } from '../components/Swiper'
import type { Fields } from '../components/common/Types'

export interface Props {
  place: Fields
}

const { place } = Astro.props

function starsToImg(stars: number) {
  switch (stars) {
    case 1:
      return oneStar
    case 2:
      return twoStars
    case 3:
      return threeStars
  }
}

const { LIGHTGALLERY_LICENSE_KEY } = import.meta.env
---
<div class="px-4 py-8 mx-auto sm:max-w-xl md:max-w-full lg:max-w-screen-xl md:px-24 lg:px-8 lg:py-20">
  <div class="grid gap-5 row-gap-8 lg:grid-cols-2">
    <div class="flex flex-col justify-top">
      <div class="max-w-xl mb-3">
        <h2 class="max-w-lg mb-2 sm:mb-4 font-sans text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl sm:leading-none">
          {place.Name}
        </h2>
        <img src={starsToImg(place.Stars)} alt="Michelin star" class="inline object-center h-8 mb-3"/>
        <p class="text-base text-gray-700 md:text-lg">
          {place.Headline}
        </p>
      </div>
      <div class="grid sm:gap-2 grid-cols-2 sm:space-y-0 mb-3">
        <div>
          <strong>Food</strong>
          <Valuation stars={place.Food}/>
        </div>
        {place.WinePairing ?
          <>
            <div>
            <strong>Wine pairing</strong>
            <Valuation stars={place.WinePairing}/>
          </div>
          </> : null
        }
      </div>
      <div class="grid sm:gap-2 sm:grid-cols-1 sm:space-y-0 border-l-4 border-red-accent-300">
        <ul class="space-y-3">
          <li class="flex ml-2">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008zM12 15h.008v.008H12V15zm0 2.25h.008v.008H12v-.008zM9.75 15h.008v.008H9.75V15zm0 2.25h.008v.008H9.75v-.008zM7.5 15h.008v.008H7.5V15zm0 2.25h.008v.008H7.5v-.008zm6.75-4.5h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V15zm0 2.25h.008v.008h-.008v-.008zm2.25-4.5h.008v.008H16.5v-.008zm0 2.25h.008v.008H16.5V15z" />
              </svg>
            <div class="ml-2">
              {place.Date}
            </div>
          </li>
          <li class="flex ml-2">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
            </svg>
            <div class="ml-2">
              {place.Location}, {place.Country}
            </div>
          </li>
          <li class="flex ml-2">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M14.25 7.756a4.5 4.5 0 100 8.488M7.5 10.5h5.25m-5.25 3h5.25M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
              />
            </svg>
            <div class="ml-2">
              {place.Price + place.PriceWinePairing}
              {place.PriceWinePairing ?
                <>
                ({place.Price} {place.PriceWinePairing > 0 ? [" Menu + ", place.PriceWinePairing, " Wine pairing"] : null})
                </> : null
              } per person
            </div>
          </li>
          <li class="flex ml-2">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244" />
            </svg>
            <div class="ml-2">
              <a href={place.URL} class="inline-flex items-center font-regular transition-colors duration-200">Website</a>
            </div>
          </li>
        </ul>
      </div>
    </div>
    <div>
      <Swiper photos={place.Photos ? place.Photos : []} licenseKey={LIGHTGALLERY_LICENSE_KEY} client:visible/> 
    </div>
  </div>
</div>
